{% comment %}
	cart-item-editor.liquid
	Renders a product + variant quick-edit form inside modal
{% endcomment %}
{% assign product_handle = request.params.product_handle %}
{% assign variant_id = request.params.variant_id %}

{% assign product = all_products[product_handle] %}

<div data-cart-item-editor class='p-6 max-w-xl space-y-4 bg-white rounded shadow'>
	<h2 class='text-lg font-bold'>Cart Item Editor</h2>

	<p class='text-sm text-gray-500'>Handle: {{ product_handle }}</p>
	<p class='text-sm text-gray-500'>Variant ID: {{ variant_id }}</p>

	{% if product %}
		<h3 class='text-xl font-semibold text-primary'>{{ product.title }}</h3>

		{% if product.variants.size > 1 %}
			<form id='cartItemEditForm' class='space-y-4'>
				{% for option in product.options_with_values %}
					<div>
						<label class='block text-sm font-medium text-gray-700'>{{ option.name }}</label>
						<select name='options[]' class='w-full border p-2 rounded'>
							{% for value in option.values %}
								<option value='{{ value }}'>{{ value }}</option>
							{% endfor %}
						</select>
					</div>
				{% endfor %}

				<div>
					<label class='block text-sm font-medium text-gray-700'>Quantity</label>
					<input type='number' name='quantity' value='1' min='1' class='w-24 border p-2 rounded'>
				</div>

				<input type='hidden' name='product_handle' value='{{ product.handle }}'>
				<input type='hidden' name='variant_id' value='{{ variant_id }}'>

				<div class='flex justify-end gap-3'>
					<button type='button' onclick='closeModal()' class='text-sm underline'>Cancel</button>
					<button type='submit' class='bg-[var(--color-button)] text-white font-semibold px-4 py-2 rounded'>
						Update Item
					</button>
				</div>
			</form>
		{% else %}
			<p class='text-sm text-gray-600'>This product has only one variant.</p>
		{% endif %}
	{% else %}
		<div class='text-red-600'>
			‚ùå Product not found for handle: <code>{{ product_handle }}</code>
		</div>
	{% endif %}
</div>
