<section class='container mx-auto px-4 py-8 color-{{ section.settings.color_scheme }}'>
	<h1 class='text-3xl font-bold mb-4 text-primary'>{{ collection.title }}</h1>

	<div class='grid grid-cols-1 md:grid-cols-4 gap-8'>
		<!-- Sidebar -->
		{% comment %}
			<aside class='md:col-span-1 w-full max-w-[280px] space-y-6'>
				<dynamic-section
					data-dynamic-url='{{ collection.url }}'
					data-section-id='collection-sidebar'
					data-load-group='default-collection'
				>
					{% render 'collection-sidebar', filters: collection.filters %}
				</dynamic-section>
			</aside>
		{% endcomment %}
		{% assign filters = collection.filters %}
		<aside class='md:col-span-1 w-full max-w-[280px] space-y-6'>
			<!-- Filters start -->
			<facet-filter>
				<form method='get' class='space-y-6'>
					{% for filter in filters %}
						<div class='border-b pb-4'>
							<label class='block font-semibold text-sm mb-2'>
								{{ filter.label }}
							</label>

							{% case filter.type %}
								{% when 'list' %}
									<div class='flex flex-wrap gap-x-2 gap-y-2'>
										{% for value in filter.values %}
											<label class='relative'>
												<input
													type='checkbox'
													name='{{ filter.param_name }}'
													value='{{ value.value }}'
													class='peer hidden'
													{% if value.active %}
														checked
													{% endif %}
													{% if value.count == 0 and value.active == false %}
														disabled
													{% endif %}
												>

												<span
													class='
														inline-block px-3 py-1 text-sm border rounded-md cursor-pointer transition
														bg-white text-gray-800 border-gray-300
														peer-checked:bg-[var(--color-button)] peer-checked:text-[var(--color-button-label)]
														peer-disabled:opacity-30 peer-disabled:cursor-not-allowed
														hover:bg-gray-100
														whitespace-normal
													'
												>
													{{ value.label }}
													{% unless value.count == 0 %} ({{ value.count }}){% endunless %}
												</span>
											</label>
										{% endfor %}
									</div>

								{% when 'price_range' %}
									<div class='flex items-center gap-2 text-sm'>
										<input
											type='number'
											name='{{ filter.min_value.param_name }}'
											value='{{ filter.min_value.value | default: filter.min_value.min }}'
											min='{{ filter.min_value.min }}'
											max='{{ filter.min_value.max }}'
											class='w-20 border px-2 py-1 rounded'
											placeholder='Min'
										>
										<span>to</span>
										<input
											type='number'
											name='{{ filter.max_value.param_name }}'
											value='{{ filter.max_value.value | default: filter.max_value.max }}'
											min='{{ filter.max_value.min }}'
											max='{{ filter.max_value.max }}'
											class='w-20 border px-2 py-1 rounded'
											placeholder='Max'
										>
									</div>
							{% endcase %}
						</div>
					{% endfor %}

					<button
						type='submit'
						class='w-full bg-[var(--color-button)] text-[var(--color-button-label)] px-4 py-2 rounded'
					>
						Apply Filters
					</button>
				</form>
			</facet-filter>
		</aside>

		<!-- Product Grid -->
		<div class='md:col-span-3'>
			<dynamic-section
				data-dynamic-url='{{ collection.url }}'
				data-section-id='collection-content'
				data-load-group='default-collection'
				data-blur-duration='500'
			>
				{% render 'collection-content' %}
			</dynamic-section>
		</div>
	</div>
</section>
{% schema %}
{
	"name": "Collection",
	"settings": [
		{
			"type": "color_scheme",
			"id": "color_scheme",
			"label": "Color scheme",
			"default": "scheme-1"
		}
	],
	"presets": [
		{
			"name": "Collection Page"
		}
	]
}
{% endschema %}
